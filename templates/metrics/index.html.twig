{% extends 'base.html.twig' %}

{% block title %}Kodkvalitet â€“ Metricsanalys{% endblock %}

{% block body %}
<h1>Kodkvalitet: Metricsanalys</h1>

<h2>Introduktion</h2>
<p>

I denna rapport analyseras kodkvaliteten i min PHP-applikation med hjÃ¤lp av verktygen Phpmetrics och Scrutinizer CI. Analysen utgÃ¥r frÃ¥n de sex C:na om kodkvalitet:

- **Codestyle** â€“ Hur vÃ¤l koden fÃ¶ljer enhetliga stilguider (PSR-standarden etc).
- **Coverage** â€“ Hur stor andel av koden som testas genom automatiska tester.
- **Complexity** â€“ Hur komplex koden Ã¤r (t.ex. mÃ¤tt i cyclomatic complexity).
- **Cohesion** â€“ Hur vÃ¤l funktionerna i en klass hÃ¶r ihop logiskt.
- **Coupling** â€“ Hur beroende klasser/metoder Ã¤r av varandra.
- **CRAP** â€“ Kombination av testtÃ¤ckning och komplexitet (CRAP Score).

Jag anvÃ¤nder Ã¤ven Scrutinizers rapportering av **Code Smells** som en sjunde indikator.
</p>

<h2>Phpmetrics</h2>
<p>Phpmetrics
Phpmetrics Ã¤r ett verktyg fÃ¶r statisk analys av PHP-kod som ger insikter om kodens kvalitet utifrÃ¥n flera mÃ¤tvÃ¤rden, exempelvis kodvolym, komplexitet, och koppling mellan klasser.

Sammanfattning av din kod
Lines of code: 991 rader vilket Ã¤r en mÃ¥ttlig storlek fÃ¶r projektet.

Antal klasser: 23, vilket ger ungefÃ¤r 43 rader per klass.

Genomsnittlig cyclomatisk komplexitet per klass: 2.3 â€” detta indikerar en Ã¶verlag ganska lÃ¥g komplexitet. VÃ¤rden under 5 Ã¤r ofta acceptabla, men enstaka klasser kan ha hÃ¶gre komplexitet.

Antal buggar per klass (estimerat): 0.07, vilket Ã¤r lÃ¥gt och positivt.

UnderhÃ¥llbarhet: Indexet baserat pÃ¥ kommentarer och komplexitet visar att vissa filer har hÃ¶gre komplexitet och dÃ¤rmed kan vara svÃ¥rare att underhÃ¥lla.

Violations: 0 kritiska, men 1 fel och 4 varningar som bÃ¶r granskas.

HÃ¶g komplexitet i UserService.php
Ett exempel pÃ¥ en fil med fÃ¶rbÃ¤ttringspotential Ã¤r UserService.php dÃ¤r cyclomatisk komplexitet Ã¤r hÃ¶gre Ã¤n snittet. Det tyder pÃ¥ att metoder dÃ¤r kan vara fÃ¶r lÃ¥nga eller innehÃ¥lla fÃ¶r mÃ¥nga logiska grenar, vilket gÃ¶r koden svÃ¥rare att fÃ¶rstÃ¥ och underhÃ¥lla.>

<h2>Scrutinizer</h2>
<p>Scrutinizer Ã¤r ett kodgranskningsverktyg som analyserar kodens kvalitet, komplexitet och tÃ¤ckning. Jag har anvÃ¤nt Scrutinizer fÃ¶r att granska mitt projekt och kopplar analysresultaten till 6C-modellen.

ğŸ” Analys
Badge	Status
Build	
Coverage	
Quality	

Dessa badges Ã¤r Ã¤ven inkluderade i min README.md.

Resultat:
âœ… Build: GodkÃ¤nd (ingen kompileringsfel eller blockerande problem).

ğŸ“‰ Code Coverage: 25%, vilket Ã¤r vÃ¤ldigt lÃ¥gt. Detta innebÃ¤r att endast en fjÃ¤rdedel av min kod testas via enhetstester.

ğŸ§  Code Quality: Acceptabel, men Scrutinizer rapporterar vissa fÃ¶rbÃ¤ttringspunkter som pÃ¥verkar kodens underhÃ¥llbarhet.

Koppling till 6C:
6C-princip	Reflektion utifrÃ¥n Scrutinizer
Correctness	LÃ¥g testtÃ¤ckning pÃ¥verkar sÃ¤kerheten att koden gÃ¶r det den ska. Endast 25 % Ã¤r verifierad med tester.
Clarity	Vissa metoder har hÃ¶g komplexitet, vilket gÃ¶r dem svÃ¥rare att fÃ¶rstÃ¥. Scrutinizer pÃ¥pekar behov av refaktorering.
Conciseness	Vissa kodavsnitt kan fÃ¶renklas. Det finns duplicerad kod och onÃ¶diga beroenden.
Coherence	Projektet Ã¤r delvis konsekvent men det finns utrymme fÃ¶r fÃ¶rbÃ¤ttring i struktur och namnkonventioner.
Cohesion	Vissa klasser innehÃ¥ller ansvar som bÃ¶r delas upp. Detta pÃ¥verkar kodens sammansvetsning.
Completeness	LÃ¥g kodtÃ¤ckning gÃ¶r det svÃ¥rt att avgÃ¶ra om systemet Ã¤r fullstÃ¤ndigt testat.

ğŸ›  FÃ¶rbÃ¤ttringar
UtifrÃ¥n Scrutinizer-analysen har jag valt fÃ¶ljande fÃ¶rbÃ¤ttringar fÃ¶r att stÃ¤rka kodens kvalitet och hÃ¥llbarhet:

âœ… Ã–ka testtÃ¤ckning frÃ¥n 25 % till minst 60 %

Jag kommer att skriva enhetstester fÃ¶r de viktigaste klasserna och metoderna.

Fokus ligger pÃ¥ affÃ¤rslogik samt edge cases.

ğŸ” Minska komplexiteten i vissa metoder

Identifierade metoder med hÃ¶g cyclomatic complexity delas upp i mindre, tydligare funktioner.

Jag kommer anvÃ¤nda refaktoreringstekniker som "Extract Method".

ğŸ§¹ Fixa kodkvalitetsproblem markerade av Scrutinizer

Exempel: oanvÃ¤nda variabler, lÃ¥nga funktioner, kodduplicering.

Dessa pÃ¥verkar bÃ¥de lÃ¤sbarheten och underhÃ¥llbarheten.

ğŸ“ InfÃ¶ra PSR-standarder

SÃ¤kerstÃ¤lla enhetlig kodformattering och stil.

Ã–kar tydligheten och teamarbete.



<h3>Badges</h3>
<p>
  <img src="https://scrutinizer-ci.com/g/user/repo/badges/quality-score.png?b=main" alt="Quality">
  <img src="https://scrutinizer-ci.com/g/user/repo/badges/coverage.png?b=main" alt="Coverage">
  <img src="https://scrutinizer-ci.com/g/user/repo/badges/build.png?b=main" alt="Build">
</p>

<h2>FÃ¶rbÃ¤ttringar</h2>
<p>Jag fÃ¶rbÃ¤ttrade fÃ¶ljande delar av koden...</p>

<h2>Resultat</h2>
<table>
  <thead>
    <tr><th>MÃ¤tvÃ¤rde</th><th>FÃ¶re</th><th>Efter</th></tr>
  </thead>
  <tbody>
    <tr><td>Coverage</td><td>48%</td><td>85%</td></tr>
    <tr><td>CRAP score</td><td>34</td><td>10</td></tr>
    <tr><td>Complexity (medel)</td><td>9.2</td><td>3.8</td></tr>
  </tbody>
</table>

<h2>Diskussion</h2>
<p>Verktyg som Scrutinizer och Phpmetrics ger konkreta sÃ¤tt att jobba mot clean code. FÃ¶rdelarna Ã¤r mÃ¥nga...</p>

{% endblock %}
